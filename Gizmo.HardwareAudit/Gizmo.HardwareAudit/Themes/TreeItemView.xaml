<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:Gizmo.HardwareAudit.Views"
    xmlns:converters="clr-namespace:Gizmo.HardwareAudit"
    xmlns:ui="clr-namespace:Gizmo.WPF;assembly=Gizmo.WPF"
    xmlns:enums="clr-namespace:Gizmo.HardwareAudit.Enums">
    <converters:BoolToVisivilityConverter x:Key="BoolToVisivilityConverter" />

    <Style TargetType="{x:Type local:TreeItemView}">
        <Setter Property="Foreground" Value="{DynamicResource {ComponentResourceKey ui:UITheme, WindowForegroundBrush}}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:TreeItemView}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="712"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <local:UIItemView Grid.ColumnSpan="2" ViewType="OneSmallValue" Flat="False"
                                          Header01="Name"
                                          Value01="{Binding Item.Name, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}"/>
                        <local:UIItemView Grid.Row="1" Grid.ColumnSpan="2" Flat="False"
                                          Header01="Description" 
                                          Value01="{Binding Item.Description, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}"/>
                        <local:UIItemView x:Name="PART_ComputerNetworkInfo" Grid.Row="2" Grid.ColumnSpan="2" ViewType="TwoValues"  Visibility="{TemplateBinding IsChildComputer}" Flat="False"
                                          Header01="FQDN" 
                                          Header02="IPV4 Address" 
                                          Value01="{Binding Item.FQDN, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}" 
                                          Value02="{Binding Item.Address, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}"/>

                        <Grid Grid.Row="3" x:Name="PART_ComputerHardwareInfo" Visibility="{TemplateBinding IsChildComputer}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="125"/>
                                <ColumnDefinition Width="20"/>
                                <ColumnDefinition Width="295"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Margin="5,3,5,0" FontWeight="Black" VerticalAlignment="Center" TextAlignment="Right" Text="Hardware Scan"/>
                            <ui:UIComboBox Flat="False" Grid.Column="2" VerticalAlignment="Center" Margin="1,3,1,0"
                                      ItemsSource="{Binding Item.HardwareScans, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}" DisplayMemberPath="ScanTime" SelectedValuePath="ScanTime"
                                      SelectedIndex="{Binding Item.LastScanIndex, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}"
                                      x:Name="cbHardwareScans"/>
                            <ui:UIControlGroup Grid.Column="3"  VerticalAlignment="Stretch" HorizontalAlignment="Left" Margin="3,3,1,0" CornerRadius="0">
                                <ui:UIButton Width="30" Command="{Binding ImportScanCommand}">
                                    <local:GizmoIcon Icon="Import" FontSize="16"/>
                                </ui:UIButton>
                                <ui:UIButton Width="30" IsEnabled="{TemplateBinding ScanAvailable}" Command="{Binding ExportScanCommand}" CommandParameter="{Binding ElementName=cbHardwareScans, Path=SelectedIndex}">
                                    <local:GizmoIcon Icon="Export" FontSize="16"/>
                                </ui:UIButton>
                                <ui:UIPopupButton Width="48">
                                    <ui:UIPopupButton.Content>
                                        <local:GizmoIcon Icon="Clear2" FontSize="16"/>
                                    </ui:UIPopupButton.Content>
                                    <ui:UIPopupButton.Items>
                                        <MenuItem Header="Delete selected" IsEnabled="{TemplateBinding ScanAvailable}" Command="{Binding DeleteScanCommand}" CommandParameter="{Binding ElementName=cbHardwareScans, Path=SelectedIndex}">
                                            <MenuItem.Icon>
                                                <local:GizmoIcon Icon="Clear2" FontSize="16"/>
                                            </MenuItem.Icon>
                                        </MenuItem>
                                        <MenuItem Header="Delete all, but keep last two scans" IsEnabled="{TemplateBinding ScanAvailable}" Command="{Binding ClearScansButKeepLastTwoCommand}">
                                            <MenuItem.Icon>
                                                <local:GizmoIcon Icon="Clear2" FontSize="16"/>
                                            </MenuItem.Icon>
                                        </MenuItem>
                                        <MenuItem Header="Delete all, but keep last scan" IsEnabled="{TemplateBinding ScanAvailable}" Command="{Binding ClearScansButKeepLastOneCommand}">
                                            <MenuItem.Icon>
                                                <local:GizmoIcon Icon="Clear2" FontSize="16"/>
                                            </MenuItem.Icon>
                                        </MenuItem>
                                        <MenuItem Header="Delete all" IsEnabled="{TemplateBinding ScanAvailable}" Command="{Binding ClearScansCommand}">
                                            <MenuItem.Icon>
                                                <local:GizmoIcon Icon="Clear2" FontSize="16"/>
                                            </MenuItem.Icon>
                                        </MenuItem>
                                    </ui:UIPopupButton.Items>
                                </ui:UIPopupButton>
                            </ui:UIControlGroup>
                        </Grid>
                        <Grid Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="4" Margin="0,5,5,5" Visibility="{Binding ScanAvailable, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BoolToVisivilityConverter}}">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <ui:UIEnumSwitch x:Name="ESViewMode" Margin="146,5,5,5" VerticalAlignment="Top" HorizontalAlignment="Left" CornerRadius="0" SelectedIndex="0">
                                <ui:UIEnumSwitch.Items>
                                    <ui:UIEnumSwitchItem Width="24" Value="{x:Static enums:UIViewModeEnum.All}">
                                        <ui:UIEnumSwitchItem.Icon>
                                            <local:GizmoIcon Icon="ComputerAll" FontSize="16"/>
                                        </ui:UIEnumSwitchItem.Icon>
                                    </ui:UIEnumSwitchItem>
                                    <ui:UIEnumSwitchItem Width="24" Value="{x:Static enums:UIViewModeEnum.SystemEnclosure}">
                                        <ui:UIEnumSwitchItem.Icon>
                                            <local:GizmoIcon Icon="SystemEnclosure" FontSize="16"/>
                                        </ui:UIEnumSwitchItem.Icon>
                                    </ui:UIEnumSwitchItem>
                                    <ui:UIEnumSwitchItem Width="24" Value="{x:Static enums:UIViewModeEnum.CPUs}">
                                        <ui:UIEnumSwitchItem.Icon>
                                            <local:GizmoIcon Icon="CPU" FontSize="16"/>
                                        </ui:UIEnumSwitchItem.Icon>
                                    </ui:UIEnumSwitchItem>
                                    <ui:UIEnumSwitchItem Width="24" Value="{x:Static enums:UIViewModeEnum.MemoryDevices}">
                                        <ui:UIEnumSwitchItem.Icon>
                                            <local:GizmoIcon Icon="MemoryDevice" FontSize="16"/>
                                        </ui:UIEnumSwitchItem.Icon>
                                    </ui:UIEnumSwitchItem>
                                    <ui:UIEnumSwitchItem Width="24" Value="{x:Static enums:UIViewModeEnum.VideoControllers}">
                                        <ui:UIEnumSwitchItem.Icon>
                                            <local:GizmoIcon Icon="VideoAdapter" FontSize="16"/>
                                        </ui:UIEnumSwitchItem.Icon>
                                    </ui:UIEnumSwitchItem>
                                    <ui:UIEnumSwitchItem Width="24" Value="{x:Static enums:UIViewModeEnum.NetworkAdapters}">
                                        <ui:UIEnumSwitchItem.Icon>
                                            <local:GizmoIcon Icon="NetworkAdapter" FontSize="16"/>
                                        </ui:UIEnumSwitchItem.Icon>
                                    </ui:UIEnumSwitchItem>
                                    <ui:UIEnumSwitchItem Width="24" Value="{x:Static enums:UIViewModeEnum.PhysicalDrives}">
                                        <ui:UIEnumSwitchItem.Icon>
                                            <local:GizmoIcon Icon="PhysicalDisk" FontSize="16"/>
                                        </ui:UIEnumSwitchItem.Icon>
                                    </ui:UIEnumSwitchItem>
                                    <ui:UIEnumSwitchItem Width="24" Value="{x:Static enums:UIViewModeEnum.Partitions}">
                                        <ui:UIEnumSwitchItem.Icon>
                                            <local:GizmoIcon Icon="Partition" FontSize="16"/>
                                        </ui:UIEnumSwitchItem.Icon>
                                    </ui:UIEnumSwitchItem>
                                    <ui:UIEnumSwitchItem Width="24" Value="{x:Static enums:UIViewModeEnum.Displays}">
                                        <ui:UIEnumSwitchItem.Icon>
                                            <local:GizmoIcon Icon="Monitor" FontSize="16"/>
                                        </ui:UIEnumSwitchItem.Icon>
                                    </ui:UIEnumSwitchItem>
                                    <ui:UIEnumSwitchItem Width="24" Value="{x:Static enums:UIViewModeEnum.Printers}">
                                        <ui:UIEnumSwitchItem.Icon>
                                            <local:GizmoIcon Icon="Printer" FontSize="16"/>
                                        </ui:UIEnumSwitchItem.Icon>
                                    </ui:UIEnumSwitchItem>
                                    <ui:UIEnumSwitchItem Width="24" Value="{x:Static enums:UIViewModeEnum.Licenses}">
                                        <ui:UIEnumSwitchItem.Icon>
                                            <local:GizmoIcon Icon="Windows" FontSize="16"/>
                                        </ui:UIEnumSwitchItem.Icon>
                                    </ui:UIEnumSwitchItem>
                                </ui:UIEnumSwitch.Items>
                            </ui:UIEnumSwitch>
                            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" CanContentScroll="True">
                                <local:HardwareScanView  ViewMode="{Binding ElementName=ESViewMode, Path=SelectedValue, Mode=TwoWay}" Item="{Binding ElementName=cbHardwareScans, Path=SelectedItem, Mode=TwoWay}" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"/>
                            </ScrollViewer>
                        </Grid>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
